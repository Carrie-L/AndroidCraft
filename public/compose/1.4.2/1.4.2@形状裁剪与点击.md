## 1. 形状与裁剪：绘图指令的遮罩

### 1.1 什么是裁剪 (Clipping)？
默认情况下，Compose 的组件都是矩形的。即使你在 `background` 里画了个圆，组件的触摸区域和布局边界依然是矩形的。

`clip(Shape)` 是一个**破坏性**的操作。它就像一把剪刀。
*   它会把组件的内容（图片、背景色、子组件）超出 `Shape` 范围的部分**切掉**。
*   **注意**：它不仅切掉了画面，还切掉了**触摸区域**（这在按钮交互中非常重要）。

### 1.2 常用形状 (Shape)
Compose 提供了一套形状原语：
1.  **`CircleShape`**：
    *   如果组件是正方形 -> 切成正圆。
    *   如果组件是长方形 -> 切成胶囊形（两头半圆）。
2.  **`RoundedCornerShape(x.dp)`**：
    *   圆角矩形。最常用的。比如 `16.dp`。
    *   也可以单独指定四个角：`topStart = 10.dp, bottomEnd = 30.dp`。
3.  **`RectangleShape`**：
    *   直角矩形（默认就是这个）。

### 1.3 顺序的再次强调
这里的逻辑和上一节的 Padding 一样关键：**剪刀必须在画布之前下刀，还是之后？**

在 Compose 中，Modifier 是**修改器**。
`clip()` 修饰符会影响**它之后**的所有绘制操作。

*   **正确写法**：
    ```kotlin
    Modifier.clip(CircleShape).background(Red)
    ```
    *   解释：先拿出一个圆形的模具 (`clip`)，然后往里面倒红色颜料 (`background`)。
    *   结果：一个红色的圆。

*   **错误写法**：
    ```kotlin
    Modifier.background(Red).clip(CircleShape)
    ```
    *   解释：先在矩形区域涂满红色，然后拿个圆形模具放在那（后面没东西了）。
    *   结果：还是一个红色的矩形！因为红色是在裁剪之前就画上去的。

    *(注：对于 `Image` 组件，clip 通常写在最前面，因为它作用于 Image 内部的绘制内容)*

---

## 2. 点击与交互：触摸区域的奥秘

### 2.1 最简单的交互：clickable
在 View 体系中，你需要 `setOnClickListener`。
在 Compose 中，点击只是一个 Modifier：`.clickable { }`。

当你加上这个 Modifier 时，Compose 实际上做了三件事：
1.  **监听触摸**：捕获手指的 Down 和 Up 事件。
2.  **处理逻辑**：判断这是否算一次有效的点击（比如按下后移动太远就不算）。
3.  **视觉反馈**：自动添加 **Ripple Effect (水波纹效果)**。这是 Material Design 的标志性反馈，证明“我被点到了”。

### 2.2 触摸区域 (Touch Target) 与顺序
这是本节的重中之重，也是前面“洋葱模型”的终极应用。

**点击区域的大小，取决于 `clickable` 在 Modifier 链中的位置。**

*   **场景 A：大点击区**
    ```kotlin
    Modifier
        .padding(20.dp) // 外边距
        .clickable { }  // <--- 在这里监听
        .size(50.dp)    // 核心大小
    ```
    *   原理：`clickable` 包裹了 `size`，但它是在 `padding` 之后。等一下，这个例子不太好理解，我们换个更直观的。

    **修正场景 A：内边距扩大点击区**
    ```kotlin
    Modifier
        .clickable { }  // <--- 1. 先监听
        .padding(20.dp) // <--- 2. 再加内边距
        .size(50.dp)    // <--- 3. 核心内容
    ```
    *   **结果**：点击区域包含核心内容 + 20dp 的内边距。
    *   **视觉**：水波纹会扩散到 padding 区域。这是增大触摸热区（Touch Target）的标准做法。

    **修正场景 B：外边距不响应点击**
    ```kotlin
    Modifier
        .padding(20.dp) // <--- 1. 先加外边距 (透明的)
        .clickable { }  // <--- 2. 再监听
        .size(50.dp)    // <--- 3. 核心内容
    ```
    *   **结果**：点击区域**只包含** 50dp 的核心内容。点击那 20dp 的外边距无效。
    *   **视觉**：水波纹只在 50dp 范围内显示。

**原理**：`clickable` 只能监听**它之后**声明的区域所组成的矩形。它之前的 `padding` 实际上把它推开了，那块空白区域不归它管。

### 2.3 禁用状态
有时候我们需要按钮不可点（比如表单没填完）。
`clickable` 有一个 `enabled` 参数：
```kotlin
Modifier.clickable(enabled = false) { ... }
```
当 `enabled = false` 时，点击回调不会触发，水波纹也不会出现。
